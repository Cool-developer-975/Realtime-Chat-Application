import"./main-Kb4lVJGq.js";const g=window.location.href.split("?").slice(1),o=g[0].split("=")[1],c=g[1].split("=")[1];document.querySelector("#heading").textContent=o;const x=document.querySelector("#chatbox"),y=document.querySelector("#btn"),i=document.querySelector("#msg"),m=document.querySelector("#typing"),f=document.querySelector("#exit-btn"),l=document.querySelector("#online-cnt");let u=!1;console.log(l);const t=io();t.connect();t.emit("user-info",o,e=>{l.textContent=`Online : ${e.cnt}`});t.on("update-cnt",e=>{l.textContent=`Online : ${e.cnt}`});t.on("incomming-msg",e=>{p(e,!1)});t.on("left",e=>{l.textContent=`Online : ${e.cnt}`});t.on("someone-typing",e=>{u||(u=!0,m.textContent=`${e.userName} is typing....`,setTimeout(()=>{m.textContent="",u=!1},3e3))});const C=()=>{const e=i.value.trim();if(i.value="",e.length>0){const n={userName:c,groupName:o,message:e};p(n,!0),t.emit("outgoing-msg",n)}};f.addEventListener("click",e=>{t.emit("leaving",{userName:c,groupName:o})&&(t.disconnect(),window.location.href=`/userpage?userName=${c}`)});y.addEventListener("click",()=>{console.log("btn called")});i.addEventListener("keydown",e=>{console.log("called"),e.key==="Enter"&&(console.log("from"),C())});i.addEventListener("input",e=>{const n={userName:c,groupName:o};t.emit("typing",n)});function p(e,n){const a=document.createElement("div"),s=document.createElement("div"),r=document.createElement("p"),d=document.createElement("p");a.classList.add("flex",n?"justify-end":"justify-start"),s.classList.add(n?"bg-green-500":"bg-blue-500","text-black","p-2","rounded-lg","max-w-xs"),r.classList.add("text-xs",n?"text-blue-200":"text-white"),r.textContent=n?"You":e.userName,d.textContent=e.message,s.appendChild(r),s.appendChild(d),a.appendChild(s),x.appendChild(a)}
