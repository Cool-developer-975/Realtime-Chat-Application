import"./main-Kb4lVJGq.js";const g=window.location.href.split("?").slice(1),o=g[0].split("=")[1],c=g[1].split("=")[1];document.querySelector("#heading").textContent=o;const y=document.querySelector("#chatbox"),f=document.querySelector("#btn"),i=document.querySelector("#msg"),d=document.querySelector("#typing"),C=document.querySelector("#exit-btn"),l=document.querySelector("#online-cnt");let u=!1;console.log(l);const t=io();t.connect();t.emit("user-info",o,e=>{l.textContent=`Online : ${e.cnt}`});t.on("update-cnt",e=>{l.textContent=`Online : ${e.cnt}`});t.on("incomming-msg",e=>{x(e,!1)});t.on("left",e=>{l.textContent=`Online : ${e.cnt}`});t.on("someone-typing",e=>{u||(u=!0,d.textContent=`${e.userName} is typing....`,setTimeout(()=>{d.textContent="",u=!1},3e3))});const p=()=>{const e=i.value.trim();if(i.value="",e.length>0){const n={userName:c,groupName:o,message:e};x(n,!0),t.emit("outgoing-msg",n)}};C.addEventListener("click",e=>{t.emit("leaving",{userName:c,groupName:o})&&(t.disconnect(),window.location.href=`/userpage?userName=${c}`)});f.addEventListener("click",p);i.addEventListener("keydown",e=>{console.log("called"),e.key==="Enter"&&(console.log("from"),p())});i.addEventListener("input",e=>{const n={userName:c,groupName:o};t.emit("typing",n)});function x(e,n){const a=document.createElement("div"),s=document.createElement("div"),r=document.createElement("p"),m=document.createElement("p");a.classList.add("flex",n?"justify-end":"justify-start"),s.classList.add(n?"bg-green-500":"bg-blue-500","text-black","p-2","rounded-lg","max-w-xs"),r.classList.add("text-xs",n?"text-blue-200":"text-white"),r.textContent=n?"You":e.userName,m.textContent=e.message,s.appendChild(r),s.appendChild(m),a.appendChild(s),y.appendChild(a)}
